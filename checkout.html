<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Checkout — TheWeer</title>
  <link rel="stylesheet" href="css/main.css">
  <style>
    body { font-family: system-ui, Arial; padding: 20px; max-width: 900px; margin: 0 auto; }
    .panel { border: 1px solid #eee; border-radius: 8px; padding: 16px; margin-bottom: 12px; }
    .row { display:flex; gap:12px; flex-wrap:wrap; }
    label { display:block; font-size:13px; margin-bottom:6px; color:#333; }
    input, select { padding:10px; border:1px solid #ddd; border-radius:6px; width:100%; box-sizing:border-box; }
    .col-2 { flex:1 1 48%; min-width:200px; }
    .summary { font-weight:600; font-size:18px; }
    .gift-highlight { border: 2px dashed #ffc107; background: #fffaf0; padding: 12px; border-radius: 8px;}
    .hidden { display:none; }
    .btn { background:#007bff; color:white; padding:12px 16px; border:none; border-radius:8px; cursor:pointer; font-weight:600; }
    .muted { color:#666; font-size:13px; }
  </style>
</head>
<body>
  <h1>Checkout</h1>

  <div id="cart-status" class="panel">
    <div id="cart-empty" class="muted">Loading cart…</div>
    <div id="cart-list" class="hidden"></div>
    <div id="cart-totals" class="hidden">
      <div style="display:flex;justify-content:space-between"><span>Subtotal</span><span id="subtotal">$0.00</span></div>
      <div style="display:flex;justify-content:space-between; margin-top:8px;"><span>Total (includes any applicable taxes & shipping)</span><span id="grand-total" class="summary">$0.00</span></div>
      <div class="muted" style="font-size:12px; margin-top:8px;">We never see your card details — you’ll pay securely on Stripe.</div>
    </div>
  </div>

  <form id="checkout-form" class="panel" onsubmit="return false;">
    <h3>Shipping Address</h3>
    <div id="shipping-panel">
      <div class="row">
        <div class="col-2">
          <label>Full name</label>
          <input id="ship-name" required />
        </div>
        <div class="col-2">
          <label>Phone</label>
          <input id="ship-phone" required />
        </div>
      </div>

      <label>Address line 1</label>
      <input id="ship-line1" required />

      <label>Address line 2 (optional)</label>
      <input id="ship-line2" />

      <div class="row">
        <div class="col-2">
          <label>City</label>
          <input id="ship-city" required />
        </div>
        <div class="col-2">
          <label>State</label>
          <select id="ship-state" required>
            <option value="">Choose state</option>
            <!-- Short list; add all states as needed -->
            <option value="CA">California</option>
            <option value="NY">New York</option>
            <option value="TX">Texas</option>
            <option value="FL">Florida</option>
            <option value="WA">Washington</option>
            <!-- ... -->
          </select>
        </div>
      </div>

      <div class="row">
        <div class="col-2">
          <label>ZIP</label>
          <input id="ship-zip" required />
        </div>
        <div class="col-2">
          <label>Country</label>
          <select id="ship-country" required>
            <option value="US">United States</option>
            <!-- expand if you ship elsewhere -->
          </select>
        </div>
      </div>
    </div>

    <div style="margin-top:12px;">
      <label style="display:flex;align-items:center;gap:8px;">
        <input type="checkbox" id="billing-same" checked />
        Billing address same as shipping
      </label>
    </div>

    <div id="billing-panel" class="panel hidden" style="margin-top:12px;">
      <h4>Billing Address</h4>
      <label>Full name</label>
      <input id="bill-name" />
      <label>Address line 1</label>
      <input id="bill-line1" />
      <div class="row">
        <div class="col-2">
          <label>City</label>
          <input id="bill-city" />
        </div>
        <div class="col-2">
          <label>State</label>
          <select id="bill-state">
            <option value="">Choose</option>
            <option value="CA">CA</option>
            <option value="NY">NY</option>
            <option value="TX">TX</option>
          </select>
        </div>
      </div>
      <div class="row" style="margin-top:8px;">
        <div class="col-2"><label>ZIP</label><input id="bill-zip" /></div>
        <div class="col-2"><label>Country</label><select id="bill-country"><option value="US">US</option></select></div>
      </div>
    </div>

    <div style="margin-top:12px;" class="panel">
      <label style="display:flex;align-items:center;gap:8px;">
        <input type="checkbox" id="is-gift" />
        Send as a gift (add gift wrap & recipient message on next screen)
      </label>

      <div id="gift-note" class="muted" style="margin-top:8px;">If checked, the shipping address will be used as the gift recipient.</div>
    </div>

    <div style="display:flex; gap:12px; margin-top:12px;">
      <button id="verify-btn" class="btn">Verify & Continue to Payment</button>
      <button id="cancel-btn" type="button" class="btn" style="background:#6c757d;">Cancel</button>
    </div>

    <div id="verify-message" style="margin-top:12px;"></div>
  </form>

  <script src="https://js.stripe.com/v3/"></script>
  <script src="js/checkout-manager.js"></script>
</body>
</html>
